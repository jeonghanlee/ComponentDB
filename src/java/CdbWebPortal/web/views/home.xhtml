<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <ui:composition template="../templates/homeViewTemplate.xhtml">
        <ui:define name="middleCenter">

            <div class="homePage">

                <div class="pageTitle">
                    <h1>CDB Home</h1>
                </div>

                <div class="sectionText">
                    A major effort in the conceptual design phase of the MBA accelerator is identifying, defining and tracking 
                    component types and component lists necessary to build the new facility. 
                    Reasonable estimates of cost and labor will depend on the thoroughness and accuracy of such lists. 
                    The primary goal of the Component Database is to capture required components and assist 
                    in defining the conceptual design of the new accelerator.
                    <p/>
                    <ui:fragment rendered="#{!loginController.loggedIn}">
                        You can browse system pages without any authentication. If you would like to add or modify
                        CDB data, please <h:link outcome="/views/login" value="login"/>.
                    </ui:fragment>
                    <p/>
                </div>

                <div class="sectionTitle">
                    <h2>System At A Glance</h2>
                </div>    

                <h:form id="systemSummaryForm">
                    <p:growl id="messages" showDetail="true" autoUpdate="true"/>

                    <p:panelGrid columns="2">

                        <p:outputLabel for="numberOfUsers" value="Registered Users" styleClass="sectionText"/>
                        <h:outputText id="numberOfUsers" value="#{userInfoController.availableItems.size()}" styleClass="sectionText"/>

                        <p:outputLabel for="numberOfComponents" value="Components" styleClass="sectionText"/>
                        <h:outputText id="numberOfComponents" value="#{componentController.availableItems.size()}" styleClass="sectionText"/>

                        <p:outputLabel for="numberOfComponentInstances" value="Component Instances" styleClass="sectionText"/>
                        <h:outputText id="numberOfComponentInstances" value="#{componentInstanceController.availableItems.size()}" styleClass="sectionText"/>

                        <p:outputLabel for="numberOfDesigns" value="Designs" styleClass="sectionText"/>
                        <h:outputText id="numberOfDesigns" value="#{designController.availableItems.size()}" styleClass="sectionText"/>

                        <h:outputText value="Software Version" styleClass="sectionText"/>
                        <h:outputLink value="#{resources.CdbSoftwareVersionUrl}" target="#{resources.CdbSoftwareVersion}">
                            <h:outputText id="softwareVersion" value="#{resources.CdbSoftwareVersion}" styleClass="sectionText"/>
                        </h:outputLink>                        
                    </p:panelGrid>
                </h:form>
            </div>

            <ui:fragment>
                <p/>
                <div class="sectionTitle">
                    <h2>Quick Links</h2>
                    <h:form id="quickLinksForm">
                        <p:panelGrid columns="1">
                            <h:outputLink value="#{resources.EdpUrl}" target="EDP">
                                <h:outputText value="EDP"/>
                            </h:outputLink>
                            <p:commandLink onclick="PF('pdmLinkDrawingSearchDialogWidget').show()">
                                <h:outputText value="PDMLink Drawing Search Tool"/>
                            </p:commandLink>
                            <h:outputLink value="#{resources.CdbDevelopmentUrl}" target="CDB Development">
                                <h:outputText value="CDB Development"/>
                            </h:outputLink>
                            <h:outputLink value="#{resources.CdbUserManualUrl}" target="CDB User Manual">
                                <h:outputText value="CDB User Manual"/>
                            </h:outputLink>
                        </p:panelGrid>
                    </h:form>
                </div>
                <ui:include src="pdmLink/private/pdmLinkDrawingSearchDialog.xhtml"/>
            </ui:fragment>

            <ui:fragment rendered="#{loginController.loggedInAsAdmin}">
                <p/>
                <div class="sectionTitle">
                    <h2>Administrative Tools</h2>
                    <h:form id="adminToolsForm">
                        <p:panelGrid columns="1">
                            <div class="commandLink">
                                <h:commandLink action="#{loginController.dropAdminRole()}" value="Drop Administrator Role"></h:commandLink>
                            </div>
                        </p:panelGrid>
                    </h:form>
                </div>
            </ui:fragment>

        </ui:define>

    </ui:composition>
</ui:composition>

