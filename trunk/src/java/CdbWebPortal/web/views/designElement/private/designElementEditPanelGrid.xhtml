<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

    <ui:param name="designElementObject" value="#{designElementController.selected}"/>
    <p:panelGrid id="designElementEditPanelGrid" columns="4" styleClass="editEntityDetails">

        <h:outputLabel for="name" value="Name" styleClass="entityDataEmphasizedLabel"/>
        <h:inputText id="name" value="#{designElementObject.name}" title="Name" styleClass="entityDataEmphasizedText"/>
        <p:message for="name"/> 
        <p:tooltip for="name" value="Enter design element name."/>

        <h:outputLabel for="parentDesign" value="Parent Design" styleClass="entityDataEmphasizedLabel"/>
        <h:outputText id="parentDesign" value="#{designElementObject.parentDesign.name}" title="Parent Design" styleClass="entityDataEmphasizedText"/>
        <p:message for="parentDesign"/> 
        <p:tooltip for="parentDesign" value="Parent design cannot be modified."/>
        
        <h:outputLabel for="designElementComponent" value="Component" 
                       styleClass="entityDataEmphasizedLabel"
                       rendered="#{designElementController.getDisplayComponentSelection(designElementObject)}"/>
        <p:column id="designElementComponent"
                  rendered="#{designElementController.getDisplayComponentSelection(designElementObject)}">
            <p:autoComplete id="designElementComponentDropdown" 
                            value="#{designElementObject.component}" 
                            var="componentObject"
                            converter="componentConverter" 
                            completeMethod="#{designElementController.completeComponent}" 
                            itemLabel="#{componentObject.name}"
                            itemValue="#{componentObject}"
                            forceSelection="true"
                            scrollHeight="200"
                            dropdown="true" 
                            styleClass="autocomplete">
                <p:ajax event="itemSelect" listener="#{designElementController.selectComponentListener}"/>
                <p:ajax event="itemUnselect" listener="#{designElementController.unselectComponentListener}"/>
            </p:autoComplete>

            <p:commandButton id="designElementComponentSelectButton"
                             action="#{componentController.clearSelectFiltersAndResetSelectDataModel()}" 
                             oncomplete="PF('designElementComponentSelectDialogWidget').show()"
                             update="@form"
                             alt="Select Component" 
                             styleClass="selectButtonForAutocomplete"
                             icon="ui-icon-search">
                <f:setPropertyActionListener target="#{designElementController.current}" value="#{designElementObject}" />
                <f:setPropertyActionListener target="#{componentController.selectedComponent}" value="#{designElementObject.component}"/>
                <p:tooltip for="designElementComponentSelectButton" value="Search for component."/>
            </p:commandButton>
        </p:column>
        <p:message for="designElementComponent"
                   rendered="#{designElementController.getDisplayComponentSelection(designElementObject)}"/>
        <p:tooltip for="designElementComponentDropdown" value="Select component."
                   rendered="#{designElementController.getDisplayComponentSelection(designElementObject)}"/> 

        <h:outputLabel for="designElementChildDesign" value="Child Design" 
                       styleClass="entityDataEmphasizedLabel"
                       rendered="#{designElementController.getDisplayChildDesignSelection(designElementObject)}"/>
        <p:column id="designElementChildDesign"
                  rendered="#{designElementController.getDisplayChildDesignSelection(designElementObject)}">
            <p:autoComplete id="designElementChildDesignDropdown" 
                            value="#{designElementObject.childDesign}" 
                            var="childDesignObject"
                            converter="designConverter" 
                            completeMethod="#{designElementController.completeChildDesign}" 
                            itemLabel="#{childDesignObject.name}"
                            itemValue="#{childDesignObject}"
                            forceSelection="true"
                            scrollHeight="200"
                            dropdown="true" 
                            styleClass="autocomplete">
                <p:ajax event="itemSelect" listener="#{designElementController.selectChildDesignListener}"/>
                <p:ajax event="itemUnselect" listener="#{designElementController.unselectChildDesignListener}"/>
            </p:autoComplete>

            <p:commandButton id="designElementChildDesignSelectButton"
                             action="#{designController.clearSelectFiltersAndResetSelectDataModel()}" 
                             oncomplete="PF('designElementChildDesignSelectDialogWidget').show()"
                             update="@form"
                             alt="Select Child Design" 
                             styleClass="selectButtonForAutocomplete"
                             icon="ui-icon-search">
                <f:setPropertyActionListener target="#{designElementController.current}" value="#{designElementObject}" />
                <p:tooltip for="designElementChildDesignSelectButton" value="Search for child design."/>
            </p:commandButton>
        </p:column>
        <p:message for="designElementChildDesign"
                   rendered="#{designElementController.getDisplayChildDesignSelection(designElementObject)}"/>
        <p:tooltip for="designElementChildDesignDropdown" value="Select child design."
                   rendered="#{designElementController.getDisplayChildDesignSelection(designElementObject)}"/> 

        <h:outputLabel for="designElementLocation" value="Location" styleClass="entityDataEmphasizedLabel"/>
        <p:column id="designElementLocation">
            <p:autoComplete id="designElementLocationDropdown" 
                            value="#{designElementObject.location}" 
                            var="location"
                            converter="locationConverter" 
                            completeMethod="#{designElementController.completeLocation}" 
                            itemLabel="#{location.name}"
                            itemValue="#{location}"
                            valueChangeListener="#{designElementController.selectLocationValueChangeListener}"
                            forceSelection="true"
                            scrollHeight="200"
                            dropdown="true" 
                            styleClass="autocomplete">
                <p:ajax event="valueChange" immediate="true" process="@this"/>
            </p:autoComplete>
            <p:commandButton id="designElementLocationSelectButton" onclick="PF('designElementLocationSelectDialogWidget').show();" 
                             alt="Select" icon="ui-icon-search"
                             styleClass="selectButtonForAutocomplete"
                             immediate="true">
                <f:setPropertyActionListener target="#{designElementController.current}" value="#{designElementObject}"/>
            </p:commandButton>
        </p:column>        
        <p:message for="designElementLocation"/> 
        <p:tooltip for="designElementLocationDropdown" value="Select location."/>

        <h:outputLabel for="sortOrder" value="Sort Order" styleClass="entityDataLabel"/>
        <h:inputText id="sortOrder" value="#{designElementObject.sortOrder}" title="Sort Order" styleClass="entityDataText"/>
        <p:message for="sortOrder"/> 
        <p:tooltip for="sortOrder" value="Enter sort order."/>

        <h:outputLabel for="description" value="Description" styleClass="entityDataLabel"/>
        <h:inputTextarea id="description" value="#{designElementObject.description}" title="Description" styleClass="entityDataText"/>
        <p:message for="description"/> 
        <p:tooltip for="description" value="Enter description."/>

        <h:outputLabel for="id" value="Id" styleClass="entityDataLabel"/>
        <h:outputText id="id" value="#{designElementObject.id}" title="Id" styleClass="entityDataText"/>
        <p:message for="id"/> 
        <p:tooltip for="id" value="Design element id cannot be modified."/>

        <ui:include src="../../entityInfo/private/entityInfoEditObject.xhtml">
            <ui:param name="entityInfoObject" value="#{designElementObject.entityInfo}"/>
        </ui:include>

    </p:panelGrid>

    <ui:include src="designElementComponentSelectDialog.xhtml">
        <ui:param name="updateTarget" value="designElementEditPanelGrid"/>
    </ui:include>
    <ui:include src="designElementComponentSelectCustomizeDisplayDialog.xhtml"/>
    <ui:include src="designElementChildDesignSelectDialog.xhtml">
        <ui:param name="updateTarget" value="designElementEditPanelGrid"/>
    </ui:include>
    <ui:include src="designElementChildDesignSelectCustomizeDisplayDialog.xhtml"/>
    <ui:include src="designElementLocationSelectDialog.xhtml">
        <ui:param name="updateTarget" value="designElementEditPanelGrid"/>
    </ui:include>

</ui:composition>


